<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemeriksa Kesesatan Logika - Website & Teks</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: #2c3e50;
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .disclaimer {
            background: #e74c3c;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-top: 15px;
        }

        .tab-container {
            display: flex;
            background: #34495e;
        }

        .tab {
            padding: 15px 20px;
            color: white;
            cursor: pointer;
            flex: 1;
            text-align: center;
            transition: background 0.3s;
        }

        .tab.active {
            background: #3498db;
            font-weight: bold;
        }

        .tab-content {
            display: none;
            padding: 25px;
        }

        .tab-content.active {
            display: block;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        input[type="url"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }

        input[type="url"]:focus {
            outline: none;
            border-color: #3498db;
        }

        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            margin-top: 15px;
            transition: background 0.3s, transform 0.2s;
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        .results-section {
            padding: 0 25px 25px;
        }

        .results-container {
            margin-top: 20px;
        }

        .fallacy-item {
            background: #f8f9fa;
            border-left: 5px solid #3498db;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .fallacy-name {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 8px;
        }

        .fallacy-desc {
            color: #555;
            margin-bottom: 8px;
        }

        .fallacy-example {
            background: #e8f4fc;
            padding: 10px;
            border-radius: 5px;
            font-style: italic;
            margin-top: 8px;
        }

        .no-fallacy {
            text-align: center;
            padding: 20px;
            color: #27ae60;
            font-weight: bold;
        }

        .fallacy-count {
            background: #34495e;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 15px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #3498db;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .website-preview {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .website-preview h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .extracted-text {
            line-height: 1.5;
            color: #555;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: white;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        .info-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç Pemeriksa Kesesatan Logika</h1>
            <p class="subtitle">Analisis argumen dari teks langsung atau website berita</p>
            <div class="disclaimer">
                ‚ö†Ô∏è Catatan: Aplikasi ini menggunakan deteksi berbasis kata kunci dan tidak 100% akurat. Hasil hanya sebagai panduan.
            </div>
        </header>

        <div class="tab-container">
            <div class="tab active" onclick="switchTab('text-tab')">Analisis Teks</div>
            <div class="tab" onclick="switchTab('website-tab')">Analisis Website</div>
        </div>

        <section id="text-tab" class="tab-content active">
            <h2>Analisis Teks Langsung</h2>
            <div class="info-box">
                Masukkan teks argumen atau pernyataan yang ingin Anda analisis di bawah ini.
            </div>
            <textarea id="userArgument" placeholder="Contoh: Kamu tidak bisa mempercayai pendapatnya tentang ekonomi karena dia bukan lulusan sarjana..."></textarea>
            <div class="button-group">
                <button onclick="analyzeArgument()">Analisis Sekarang</button>
                <button onclick="clearText()" style="background: #95a5a6;">Hapus Teks</button>
            </div>
        </section>

        <section id="website-tab" class="tab-content">
            <h2>Analisis Konten Website</h2>
            <div class="warning-box">
                ‚ö†Ô∏è Fitur ini membutuhkan CORS Proxy dan mungkin tidak bekerja untuk semua website karena kebijakan keamanan.
            </div>
            <input type="url" id="urlInput" placeholder="Masukkan URL website (contoh: https://example.com/artikel)">
            <div class="button-group">
                <button onclick="analyzeWebsite()">Ambil & Analisis Konten</button>
                <button onclick="clearWebsite()" style="background: #95a5a6;">Reset</button>
            </div>
            
            <div id="website-preview" class="website-preview" style="display: none;">
                <h3>Konten yang Diambil:</h3>
                <div id="extracted-content" class="extracted-text"></div>
            </div>
        </section>

        <section class="results-section">
            <h2>Hasil Analisis</h2>
            <div id="results" class="results-container">
                <div class="no-fallacy">Pilih metode analisis dan masukkan konten untuk memulai</div>
            </div>
        </section>
    </div>

    <footer>
        &copy; 2023 Pemeriksa Kesesatan Logika - Alat Edukasi Critical Thinking
    </footer>

    <script>
        // Database Fallacy
        const fallacyDatabase = [
            {
                name: "Ad Hominem",
                keywords: ["bodoh", "dungu", "gila", "hypocrite", "munafik", "tidak sekolah", "bukan sarjana", "tidak berpendidikan", "orang awam"],
                description: "Menyerang karakter atau sifat personal lawan bicara, bukan argumennya.",
                example: "Jangan dengarkan pendapatnya tentang lingkungan, dia kan pernah bercerai."
            },
            {
                name: "Straw Man",
                keywords: ["berarti anda bilang", "jadi menurut anda", "itu sama saja dengan", "artinya kamu", "maksud kamu"],
                description: "Menyederhanakan, melebih-lebihkan, atau memelintir argumen lawan menjadi versi yang lemah dan mudah diserang.",
                example: "Argumen: 'Kita perlu mereformasi polisi.' Straw Man: 'Jadi kamu mau membubarkan kepolisian dan membuat kekacauan?'"
            },
            {
                name: "False Cause (Post Hoc)",
                keywords: ["setelah itu", "maka karena itu", "terbukti menyebabkan", "akibatnya", "penyebabnya"],
                description: "Mengasumsikan bahwa karena peristiwa A terjadi sebelum peristiwa B, maka A pastilah penyebab B.",
                example: "Saya memakai baju merah dan tim saya menang. Jadi, baju merah ini membawa keberuntungan."
            },
            {
                name: "False Dilemma",
                keywords: ["kalau tidak", "harus salah satu", "pilih saja", "antara ini atau itu", "tidak ada pilihan lain"],
                description: "Hanya menyajikan dua pilihan ekstrem seolah-olah itulah satu-satunya opsi.",
                example: "Kalau kamu tidak bersama kami, berarti kamu musuh kami."
            },
            {
                name: "Slippery Slope",
                keywords: ["nanti akan", "lambat laun", "ujung-ujungnya", "pasti berakhir", "berakibat"],
                description: "Berargumen bahwa suatu tindakan kecil akan memicu rangkaian peristiwa yang berujung pada konsekuensi besar yang buruk.",
                example: "Jika kita melegalkan ganja untuk medis, selanjutnya orang akan minta ganja untuk rekreasi, lalu kecanduan narkoba akan merajalela."
            },
            {
                name: "Appeal to Emotion",
                keywords: ["demi anak cucu", "masa depan bangsa", "cinta tanah air", "kasihan", "takutlah", "demi Tuhan"],
                description: "Membujuk orang dengan memanfaatkan emosi (takut, kasihan, marah, kebanggaan) alih-alih fakta.",
                example: "Dukunglah produk lokal ini jika kamu mencintai tanah airmu!"
            },
            {
                name: "Hasty Generalization",
                keywords: ["semua orang", "selalu", "tidak pernah", "setiap kali", "semuanya", "semua pihak"],
                description: "Menarik kesimpulan umum berdasarkan sampel yang terlalu kecil atau tidak representatif.",
                example: "Saya bertemu tiga orang dari kota X dan mereka semuanya kasar. Jadi, pasti semua orang di kota X itu kasar."
            },
            {
                name: "Tu Quoque",
                keywords: ["kamu juga", "dulu juga", "sama saja", "hiperkrit", "munafik"],
                description: "Membenarkan tindakan salah sendiri dengan alasan orang lain juga melakukannya.",
                example: "Kenapa kamu marah saya nyontek? Kamu dulu juga pernah nyontek kok!"
            },
            {
                name: "Appeal to Authority",
                keywords: ["katanya pakar", "menurut ahli", "para ilmuwan", "profesor berkata", "dr. tersebut"],
                description: "Menggunakan otoritas sebagai kebenaran mutlak tanpa bukti pendukung.",
                example: "Produk ini pasti bagus karena diendorse oleh artis terkenal."
            },
            {
                name: "Circular Reasoning",
                keywords: ["memang sudah seharusnya", "karena begitulah", "sudah terbukti dengan sendirinya"],
                description: "Kesimpulan dari argumen sama dengan premisnya. Argumen berputar-putar tanpa alasan yang sesungguhnya.",
                example: "Alkitab adalah firman Tuhan karena di dalamnya tertulis bahwa itu adalah firman Tuhan."
            }
        ];

        // Tab switching function
        function switchTab(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Clear results when switching tabs
            document.getElementById('results').innerHTML = 
                '<div class="no-fallacy">Pilih metode analisis dan masukkan konten untuk memulai</div>';
        }

        // Function to check for fallacies in text
        function checkForFallacies(text) {
            const detectedFallacies = [];
            const lowerCaseText = text.toLowerCase();

            fallacyDatabase.forEach(fallacy => {
                const hasKeyword = fallacy.keywords.some(keyword => 
                    lowerCaseText.includes(keyword.toLowerCase())
                );

                // Also check with regex for specific patterns
                let regexPatterns = [];
                
                if (fallacy.name === "Straw Man") {
                    regexPatterns = [
                        /berarti (kamu|anda|kalian) (bilang|maksud|ingin)/gi,
                        /jadi (menurut|dengan) (kamu|anda)/gi
                    ];
                }
                
                if (fallacy.name === "False Cause") {
                    regexPatterns = [
                        /setelah .* (lalu|maka|kemudian) .*/gi
                    ];
                }
                
                const hasRegexMatch = regexPatterns.some(pattern => pattern.test(lowerCaseText));

                if (hasKeyword || hasRegexMatch) {
                    // Calculate matching score (simple)
                    let score = 0;
                    fallacy.keywords.forEach(keyword => {
                        const regex = new RegExp(keyword, 'gi');
                        const matches = lowerCaseText.match(regex);
                        if (matches) {
                            score += matches.length;
                        }
                    });
                    
                    detectedFallacies.push({
                        ...fallacy,
                        score: score
                    });
                }
            });

            // Sort by highest score
            detectedFallacies.sort((a, b) => b.score - a.score);
            
            return detectedFallacies;
        }

        // Function to analyze text argument
        function analyzeArgument() {
            const userInput = document.getElementById('userArgument').value;
            const resultsContainer = document.getElementById('results');

            if (!userInput.trim()) {
                resultsContainer.innerHTML = '<div class="no-fallacy" style="color:#e74c3c;">Silakan masukkan teks terlebih dahulu!</div>';
                return;
            }

            showLoading();
            
            // Simulate processing time
            setTimeout(() => {
                const detected = checkForFallacies(userInput);
                displayResults(detected, userInput);
            }, 800);
        }

        // Function to analyze website content
        async function analyzeWebsite() {
            const url = document.getElementById('urlInput').value;
            const resultsContainer = document.getElementById('results');
            const previewContainer = document.getElementById('website-preview');
            const extractedContent = document.getElementById('extracted-content');

            if (!url.trim()) {
                resultsContainer.innerHTML = '<div class="no-fallacy" style="color:#e74c3c;">Silakan masukkan URL website terlebih dahulu!</div>';
                return;
            }

            showLoading("Mengambil konten dari website...");

            try {
                // Use a CORS proxy to bypass CORS restrictions
                // Note: This is a public proxy - in production, you should use your own
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                const targetUrl = encodeURIComponent(url);
                
                const response = await fetch(proxyUrl + targetUrl);
                
                if (!response.ok) {
                    throw new Error(`Gagal mengambil konten: ${response.status} ${response.statusText}`);
                }
                
                const html = await response.text();
                
                // Extract text content from HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Remove script and style elements
                const scripts = doc.querySelectorAll('script, style, nav, header, footer');
                scripts.forEach(element => element.remove());
                
                // Try to get the main content
                // First try article tag, then main, then body
                let contentElement = doc.querySelector('article') || 
                                   doc.querySelector('main') || 
                                   doc.querySelector('.content, .article, .post') || 
                                   doc.body;
                
                let textContent = contentElement.innerText || contentElement.textContent;
                
                // Clean up the text
                textContent = textContent
                    .replace(/\s+/g, ' ')
                    .replace(/\n+/g, '\n')
                    .trim();
                
                // Limit text length for performance
                const maxLength = 10000;
                if (textContent.length > maxLength) {
                    textContent = textContent.substring(0, maxLength) + '... [konten dipotong]';
                }
                
                // Show preview
                extractedContent.textContent = textContent;
                previewContainer.style.display = 'block';
                
                // Analyze the extracted text
                showLoading("Menganalisis konten website...");
                
                setTimeout(() => {
                    const detected = checkForFallacies(textContent);
                    displayResults(detected, textContent, `Konten dari: ${url}`);
                }, 1000);
                
            } catch (error) {
                resultsContainer.innerHTML = `
                    <div class="no-fallacy" style="color:#e74c3c;">
                        Gagal mengambil konten website: ${error.message}<br><br>
                        <small>Ini mungkin karena:<br>
                        - Website memblokir akses melalui CORS<br>
                        - Koneksi internet bermasalah<br>
                        - URL tidak valid</small>
                    </div>`;
            }
        }

        // Function to display loading state
        function showLoading(message = "Menganalisis konten...") {
            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    ${message}
                </div>`;
        }

        // Function to display results
        function displayResults(detected, originalText, source = "Teks yang dianalisis") {
            const resultsContainer = document.getElementById('results');
            
            // Show source info
            let sourceInfo = '';
            if (source) {
                const textPreview = originalText.length > 200 ? 
                    originalText.substring(0, 200) + '...' : originalText;
                sourceInfo = `
                    <div class="info-box">
                        <strong>Sumber:</strong> ${source}<br>
                        <strong>Preview:</strong> "${textPreview}"
                    </div>
                `;
            }

            if (detected.length === 0) {
                resultsContainer.innerHTML = `
                    ${sourceInfo}
                    <div class="no-fallacy">
                        ‚úÖ Tidak terdeteksi pola fallacy yang jelas.<br><br>
                        <small>Namun, ini tidak menjamin argumen tersebut valid. Periksa konteks dan struktur logika secara manual.</small>
                    </div>`;
            } else {
                resultsContainer.innerHTML = `
                    ${sourceInfo}
                    <div class="fallacy-count">Ditemukan ${detected.length} kemungkinan kesesatan logika</div>`;
                
                detected.forEach(fallacy => {
                    const confidence = fallacy.score > 3 ? "Tinggi" : fallacy.score > 1 ? "Sedang" : "Rendah";
                    const color = fallacy.score > 3 ? "#e74c3c" : fallacy.score > 1 ? "#f39c12" : "#f1c40f";
                    
                    resultsContainer.innerHTML += `
                        <div class="fallacy-item" style="border-left-color: ${color}">
                            <div class="fallacy-name">${fallacy.name} <span style="font-size:0.8rem; background:${color}; color:white; padding:2px 8px; border-radius:10px;">Kecocokan: ${confidence}</span></div>
                            <div class="fallacy-desc">${fallacy.description}</div>
                            <div class="fallacy-example"><strong>Contoh:</strong> ${fallacy.example}</div>
                        </div>
                    `;
                });
            }
        }

        // Function to clear text
        function clearText() {
            document.getElementById('userArgument').value = '';
            document.getElementById('results').innerHTML = '<div class="no-fallacy">Masukkan teks dan klik "Analisis Sekarang" untuk memulai</div>';
        }

        // Function to clear website input
        function clearWebsite() {
            document.getElementById('urlInput').value = '';
            document.getElementById('website-preview').style.display = 'none';
            document.getElementById('results').innerHTML = '<div class="no-fallacy">Masukkan URL website dan klik "Ambil & Analisis Konten" untuk memulai</div>';
        }

        // Add event listener for Enter key in textarea
        document.getElementById('userArgument').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                analyzeArgument();
            }
        });

        // Add event listener for Enter key in URL input
        document.getElementById('urlInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeWebsite();
            }
        });
    </script>
</body>
</html>